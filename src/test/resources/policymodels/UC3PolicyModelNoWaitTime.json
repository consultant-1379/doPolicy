{
   "apexPolicyModel" : {
      "key" : {
         "name" : "ApexDoPolicyModel",
         "version" : "0.0.1"
      },
      "keyInformation" : {
         "key" : {
            "name" : "ApexDoPolicyModel_KeyInfo",
            "version" : "0.0.1"
         },
         "keyInfoMap" : {
            "entry" : [ {
               "key" : {
                  "name" : "Action",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "Action",
                     "version" : "0.0.1"
                  },
                  "UUID" : "fecbf45a-8559-3ba8-be95-c773d8277912",
                  "description" : "Generated description for concept referred to by key \"Action:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "AffectedObjectsOutputSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AffectedObjectsOutputSchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "5d0e4a24-cc0c-34c4-b018-e4d7ed3749fa",
                  "description" : "Generated description for concept referred to by key \"AffectedObjectsOutputSchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "AffectedObjectsSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AffectedObjectsSchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "8ab10cb2-7656-3a3d-9cf1-4d7a5c9109cb",
                  "description" : "Generated description for concept referred to by key \"AffectedObjectsSchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "AlternativeActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AlternativeActionTask",
                     "version" : "0.0.1"
                  },
                  "UUID" : "6d28ec87-607b-33f9-a073-0aa424de171e",
                  "description" : "Generated description for concept referred to by key \"AlternativeActionTask:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel",
                     "version" : "0.0.1"
                  },
                  "UUID" : "32864a3a-21d4-33ca-8ce2-6dfa9f345cb0",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_Albums",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_Albums",
                     "version" : "0.0.1"
                  },
                  "UUID" : "34893e3e-7840-3de3-b219-b90a3bec9e5f",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_Albums:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_Events",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_Events",
                     "version" : "0.0.1"
                  },
                  "UUID" : "3f534ef4-67a7-317e-96ad-b6214c6809a2",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_Events:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_KeyInfo",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_KeyInfo",
                     "version" : "0.0.1"
                  },
                  "UUID" : "af1a6ed7-eab1-3da0-afbd-36439e6c050d",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_KeyInfo:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_Policies",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_Policies",
                     "version" : "0.0.1"
                  },
                  "UUID" : "9c99424e-4eba-3968-be10-eddf5d4aa75f",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_Policies:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_Schemas",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_Schemas",
                     "version" : "0.0.1"
                  },
                  "UUID" : "d0386aa2-7c23-3f73-9006-7e443205a234",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_Schemas:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ApexDoPolicyModel_Tasks",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ApexDoPolicyModel_Tasks",
                     "version" : "0.0.1"
                  },
                  "UUID" : "00bbdd20-3408-325d-8d78-daee952c2e98",
                  "description" : "Generated description for concept referred to by key \"ApexDoPolicyModel_Tasks:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "DecisionMakingPolicy",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "DecisionMakingPolicy",
                     "version" : "0.0.1"
                  },
                  "UUID" : "af3f8e02-8842-3dde-b936-5b3b8fd3ddad",
                  "description" : "Generated description for concept referred to by key \"DecisionMakingPolicy:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "HistoryContextSchema",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "HistoryContextSchema",
                     "version" : "0.0.1"
                  },
                  "UUID" : "45f3cb70-69ba-30a3-8825-f91fefdd38be",
                  "description" : "Generated description for concept referred to by key \"HistoryContextSchema:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "LogOnlyActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "LogOnlyActionTask",
                     "version" : "0.0.1"
                  },
                  "UUID" : "1161d988-5bd5-361e-8579-a3c849714dc5",
                  "description" : "Generated description for concept referred to by key \"LogOnlyActionTask:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "PrimaryActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "PrimaryActionTask",
                     "version" : "0.0.1"
                  },
                  "UUID" : "498c9798-79db-34b6-9995-57d9e4ba4dbf",
                  "description" : "Generated description for concept referred to by key \"PrimaryActionTask:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RegisterRuleToContextTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RegisterRuleToContextTask",
                     "version" : "0.0.1"
                  },
                  "UUID" : "94b3dc82-0e57-34e4-b744-e943484582a1",
                  "description" : "Generated description for concept referred to by key \"RegisterRuleToContextTask:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleEvent",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleEvent",
                     "version" : "0.0.1"
                  },
                  "UUID" : "eafa767f-bf43-331c-b249-e9505f5873bb",
                  "description" : "Generated description for concept referred to by key \"RuleEvent:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState1Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState1Task",
                     "version" : "0.0.1"
                  },
                  "UUID" : "f2a86e34-fa25-3c3c-849a-45e1f8ea5c3d",
                  "description" : "Generated description for concept referred to by key \"RuleFilteringState1Task:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState2Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState2Task",
                     "version" : "0.0.1"
                  },
                  "UUID" : "0e83966f-8e77-35a9-840d-34d392de4614",
                  "description" : "Generated description for concept referred to by key \"RuleFilteringState2Task:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState3Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState3Task",
                     "version" : "0.0.1"
                  },
                  "UUID" : "bade8205-1b8d-340a-a8ad-046ea1f30340",
                  "description" : "Generated description for concept referred to by key \"RuleFilteringState3Task:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState4Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState4Task",
                     "version" : "0.0.1"
                  },
                  "UUID" : "60875622-bfdb-3c87-8918-a57fae959a6e",
                  "description" : "Generated description for concept referred to by key \"RuleFilteringState4Task:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleIdsArraySchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleIdsArraySchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "73f4a3fd-1de0-3d9e-a77a-ad94583b03a9",
                  "description" : "Generated description for concept referred to by key \"RuleIdsArraySchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleOutEvent",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleOutEvent",
                     "version" : "0.0.1"
                  },
                  "UUID" : "a0da5bc3-33ad-3d67-b59c-864db1c0ae82",
                  "description" : "Generated description for concept referred to by key \"RuleOutEvent:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleSchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "cdf0d507-6aed-3cae-9802-85be39cb8d83",
                  "description" : "Generated description for concept referred to by key \"RuleSchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RuleUpdatePolicy",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleUpdatePolicy",
                     "version" : "0.0.1"
                  },
                  "UUID" : "c000e193-85be-3577-a0f5-81a5c6847eca",
                  "description" : "Generated description for concept referred to by key \"RuleUpdatePolicy:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "RulesArraySchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RulesArraySchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "07722679-d4f9-352e-89e4-b741990cdb73",
                  "description" : "Generated description for concept referred to by key \"RulesArraySchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "SimpleArrayType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleArrayType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "58afcbba-cf9b-370f-9602-4262b22202e8",
                  "description" : "Generated description for concept referred to by key \"SimpleArrayType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "SimpleDateType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleDateType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "86db6739-3f3f-308f-a3cd-56501fa47f98",
                  "description" : "Generated description for concept referred to by key \"SimpleDateType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "SimpleIntegerType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleIntegerType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "ab00a5b8-7edd-340f-8140-4d14f571edfb",
                  "description" : "Generated description for concept referred to by key \"SimpleIntegerType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "SimpleStringType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleStringType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "8a4957cf-9493-3a76-8c22-a208e23259af",
                  "description" : "Generated description for concept referred to by key \"SimpleStringType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "StateTrigger",
                  "version" : "1.0"
               },
               "value" : {
                  "key" : {
                     "name" : "StateTrigger",
                     "version" : "1.0"
                  },
                  "UUID" : "0e8b41fa-d79b-309e-bddd-14a9032687b1",
                  "description" : "Generated description for concept referred to by key \"StateTrigger:1.0\""
               }
            }, {
               "key" : {
                  "name" : "ThresholdSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ThresholdSchemaType",
                     "version" : "0.0.1"
                  },
                  "UUID" : "84de9014-1939-313e-a44f-5fa71f3c1e28",
                  "description" : "Generated description for concept referred to by key \"ThresholdSchemaType:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "Trigger",
                  "version" : "1.0"
               },
               "value" : {
                  "key" : {
                     "name" : "Trigger",
                     "version" : "1.0"
                  },
                  "UUID" : "00d440c2-9222-36a5-b7c6-241eb2f64ac1",
                  "description" : "Generated description for concept referred to by key \"Trigger:1.0\""
               }
            }, {
               "key" : {
                  "name" : "historyContext",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "historyContext",
                     "version" : "0.0.1"
                  },
                  "UUID" : "e65dbef6-0396-31ae-a6ff-03a3aa0a56ce",
                  "description" : "Generated description for concept referred to by key \"historyContext:0.0.1\""
               }
            }, {
               "key" : {
                  "name" : "ruleContext",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  },
                  "UUID" : "8fcc2719-0064-3ee8-90c8-d3ba4b951f30",
                  "description" : "Generated description for concept referred to by key \"ruleContext:0.0.1\""
               }
            } ]
         }
      },
      "policies" : {
         "key" : {
            "name" : "ApexDoPolicyModel_Policies",
            "version" : "0.0.1"
         },
         "policyMap" : {
            "entry" : [ {
               "key" : {
                  "name" : "DecisionMakingPolicy",
                  "version" : "0.0.1"
               },
               "value" : {
                  "policyKey" : {
                     "name" : "DecisionMakingPolicy",
                     "version" : "0.0.1"
                  },
                  "template" : "freestyle",
                  "state" : {
                     "entry" : [ {
                        "key" : "MatchAndDecisionState",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "DecisionMakingPolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "MatchAndDecisionState"
                           },
                           "trigger" : {
                              "name" : "StateTrigger",
                              "version" : "1.0"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "DecisionStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "Action",
                                       "version" : "0.0.1"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "NULL",
                                       "parentKeyVersion" : "0.0.0",
                                       "parentLocalName" : "NULL",
                                       "localName" : "NULL"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ {
                              "name" : "historyContext",
                              "version" : "0.0.1"
                           }, {
                              "name" : "ruleContext",
                              "version" : "0.0.1"
                           } ],
                           "taskSelectionLogic" : {
                              "key" : "TaskSelectionLogic",
                              "logicFlavour" : "JAVASCRIPT",
                              "logic" : "var returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar primaryActionTask = executor.subject.getTaskKey(\"PrimaryActionTask\");\nvar alternativeActionTask = executor.subject.getTaskKey(\"AlternativeActionTask\");\nvar logOnlyActionTask = executor.subject.getTaskKey(\"LogOnlyActionTask\");\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar historyContext = executor.getContextAlbum(\"historyContext\");\nvar currentDateInUTC = new Date(Date.now()).toUTCString();\nvar currentDateObject = new Date(currentDateInUTC).getTime();\n\nvar rulesFromState = taskInputEvent.get(\"rules\");\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\n\nvar ruleID = rulesFromState[0];\nlogger.info(\"Executing with rule: \" + ruleID);\nvar historyContextID = taskInputEvent.get(\"faultAssetId\");\n\nvar rule = context.get(ruleID);\nvar history = historyContext.get(historyContextID);\n\nvar timeLapse = rule.get(\"timeLapse\");\nvar subsequentActionWaitTime = 0;\ntakeActionOnTrigger();\n\nfunction takeActionOnTrigger(){\n    if (history != null) {\n        setSubsequentActionWaitTime();\n        logger.info(\"### Action History Context Found for: \" + historyContextID + \" ###\");\n        var previousActionTimestamp = new Date(history.get(\"actionTimestamp\")).getTime();\n        var durationSincePreviousAction = durationSince(previousActionTimestamp);\n        if (subsequentActionWaitTime < durationSincePreviousAction) {\n            logger.info(\"### Subsequent Action Wait Time HAS Passed ###\");\n            decideOnActionForTrigger();\n        } else {\n            logger.info(\"### Subsequent Action Wait Time HAS NOT Passed ###\");\n            logger.info(\"### Issuing LOG ONLY Action ###\");\n            logFilteredTrigger();\n        }\n    } else {\n        logger.info(\"### No Action History Context Found for : \" + historyContextID + \" ###\");\n        if(!actionIsLogOnly(rule.get(\"primaryAction\"))){\n            primaryActionTask.copyTo(executor.selectedTask);\n        }else{\n            logOnlyActionTask.copyTo(executor.selectedTask);\n        }\n    }\n}\n\nfunction decideOnActionForTrigger(){\n    if (!ruleHasAlternativeAction()) {\n        if(!actionIsLogOnly(rule.get(\"primaryAction\"))){\n            primaryActionTask.copyTo(executor.selectedTask);\n        }else{\n            logOnlyActionTask.copyTo(executor.selectedTask);\n        }\n    } else {\n        if(actionIsLogOnly(rule.get(\"alternativeAction\"))){\n            logOnlyActionTask.copyTo(executor.selectedTask);\n        }else{\n            var counter = getNumberOfActionsWithinTimeLapse();\n            var ruleCount = rule.get(\"actionCount\");\n            if (counter >= ruleCount) {\n                logger.info(\"### Action Count HAS Been Exceeded ###\");\n                alternativeActionTask.copyTo(executor.selectedTask);\n            } else {\n                logger.info(\"### Action Count HAS NOT Been Exceeded ###\");\n                primaryActionTask.copyTo(executor.selectedTask);\n            }\n        }\n    }    \n}\n\nfunction logFilteredTrigger(){\n    executionLogDataObject = initExecutionLogObject(\"Filtered\", \"Filtered because the subsequent action wait time had not passed.\");\n    logger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\n    logger.info(JSON.stringify(executionLogDataObject));\n    logger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n    sendRESTRequestToNBI(executionLogDataObject);\n    returnValue = executor.FALSE;\n}\n\nfunction ruleHasAlternativeAction() {\n    var alternativeAction = rule.get(\"alternativeAction\");\n    if (alternativeAction != \"null\") {\n        logger.info(\"### The Rule HAS Got An Alternative Action ###\");\n        return true;\n    } else {\n        logger.info(\"### The Rule HAS NOT Got An Alternative Action ###\");\n        return false;\n    }\n}\n\nfunction getNumberOfActionsWithinTimeLapse() {\n    var arrayOfTimestamps = JSON.parse(history.get(\"arrayActionTimestamps\"));\n    var actionsWithinTimeLapse = arrayOfTimestamps.filter(filterTimestampsOutsideTimeLapse);\n    updateHistoryContext(actionsWithinTimeLapse);\n    return actionsWithinTimeLapse.length;\n}\n\nfunction filterTimestampsOutsideTimeLapse(value, index, array) {\n    var arrayEntryTimestamp = new Date(value).getTime();\n    var duration = durationSince(arrayEntryTimestamp);\n    return duration < timeLapse;\n}\n\nfunction updateHistoryContext(timeLapseArray){\n    var newHistoryContextObject = executor.getContextAlbum(\"historyContext\").getSchemaHelper().createNewInstance();\n    newHistoryContextObject.put(\"eventType\", taskInputEvent.get(\"eventType\"));\n    newHistoryContextObject.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\n    newHistoryContextObject.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\n    newHistoryContextObject.put(\"action\", history.get(\"action\"));\n    newHistoryContextObject.put(\"actionTimestamp\", history.get(\"actionTimestamp\"));\n    newHistoryContextObject.put(\"arrayActionTimestamps\", JSON.stringify(timeLapseArray));\n    historyContext.put(historyContextID, newHistoryContextObject);\n}\n\nfunction durationSince(dateTimeObject) {\n    var toMinutes = 1000 * 60;\n    return ((currentDateObject - dateTimeObject) / toMinutes);\n}\n\nfunction setSubsequentActionWaitTime(){\n    // subsequentActionWaitTime specified in minutes.\n    subsequentActionWaitTime = 0;\n}\n\nfunction actionIsLogOnly(ruleAction){\n    if(ruleAction==\"logOnly\"){\n        return true;\n    }\n    return false;\n}\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "PrimaryActionTask",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "AlternativeActionTask",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              }, {
                                 "key" : {
                                    "name" : "LogOnlyActionTask",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              }, {
                                 "key" : {
                                    "name" : "PrimaryActionTask",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "MatchAndDecisionState",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     }, {
                        "key" : "RuleFilteringState1",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "DecisionMakingPolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "RuleFilteringState1"
                           },
                           "trigger" : {
                              "name" : "Trigger",
                              "version" : "1.0"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "DecisionStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState1",
                                       "localName" : "DecisionStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "StateTrigger",
                                       "version" : "1.0"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "NULL",
                                       "localName" : "RuleFilteringState2"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ {
                              "name" : "ruleContext",
                              "version" : "0.0.1"
                           } ],
                           "taskSelectionLogic" : {
                              "key" : "NULL",
                              "logicFlavour" : "UNDEFINED",
                              "logic" : ""
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "RuleFilteringState1Task",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "RuleFilteringState1Task",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState1",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState1",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     }, {
                        "key" : "RuleFilteringState2",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "DecisionMakingPolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "RuleFilteringState2"
                           },
                           "trigger" : {
                              "name" : "StateTrigger",
                              "version" : "1.0"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "DecisionStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState2",
                                       "localName" : "DecisionStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "StateTrigger",
                                       "version" : "1.0"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "NULL",
                                       "localName" : "RuleFilteringState3"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ {
                              "name" : "ruleContext",
                              "version" : "0.0.1"
                           } ],
                           "taskSelectionLogic" : {
                              "key" : "NULL",
                              "logicFlavour" : "UNDEFINED",
                              "logic" : ""
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "RuleFilteringState2Task",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "RuleFilteringState2Task",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState2",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState2",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     }, {
                        "key" : "RuleFilteringState3",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "DecisionMakingPolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "RuleFilteringState3"
                           },
                           "trigger" : {
                              "name" : "StateTrigger",
                              "version" : "1.0"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "DecisionStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState3",
                                       "localName" : "DecisionStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "StateTrigger",
                                       "version" : "1.0"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "NULL",
                                       "localName" : "RuleFilteringState4"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ {
                              "name" : "ruleContext",
                              "version" : "0.0.1"
                           } ],
                           "taskSelectionLogic" : {
                              "key" : "NULL",
                              "logicFlavour" : "UNDEFINED",
                              "logic" : ""
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "RuleFilteringState3Task",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "RuleFilteringState3Task",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState3",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState3",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     }, {
                        "key" : "RuleFilteringState4",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "DecisionMakingPolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "RuleFilteringState4"
                           },
                           "trigger" : {
                              "name" : "StateTrigger",
                              "version" : "1.0"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "DecisionStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState4",
                                       "localName" : "DecisionStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "StateTrigger",
                                       "version" : "1.0"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "NULL",
                                       "localName" : "MatchAndDecisionState"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ {
                              "name" : "ruleContext",
                              "version" : "0.0.1"
                           } ],
                           "taskSelectionLogic" : {
                              "key" : "NULL",
                              "logicFlavour" : "UNDEFINED",
                              "logic" : ""
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "RuleFilteringState4Task",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "RuleFilteringState4Task",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState4",
                                       "localName" : "DecisionMakingPolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "DecisionMakingPolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "RuleFilteringState4",
                                       "localName" : "DecisionStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     } ]
                  },
                  "firstState" : "RuleFilteringState1"
               }
            }, {
               "key" : {
                  "name" : "RuleUpdatePolicy",
                  "version" : "0.0.1"
               },
               "value" : {
                  "policyKey" : {
                     "name" : "RuleUpdatePolicy",
                     "version" : "0.0.1"
                  },
                  "template" : "freestyle",
                  "state" : {
                     "entry" : [ {
                        "key" : "AddingRulestoMapState",
                        "value" : {
                           "stateKey" : {
                              "parentKeyName" : "RuleUpdatePolicy",
                              "parentKeyVersion" : "0.0.1",
                              "parentLocalName" : "NULL",
                              "localName" : "AddingRulestoMapState"
                           },
                           "trigger" : {
                              "name" : "RuleEvent",
                              "version" : "0.0.1"
                           },
                           "stateOutputs" : {
                              "entry" : [ {
                                 "key" : "RuleUpdateStateOutput",
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "RuleUpdatePolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "AddingRulestoMapState",
                                       "localName" : "RuleUpdateStateOutput"
                                    },
                                    "outgoingEvent" : {
                                       "name" : "RuleOutEvent",
                                       "version" : "0.0.1"
                                    },
                                    "nextState" : {
                                       "parentKeyName" : "NULL",
                                       "parentKeyVersion" : "0.0.0",
                                       "parentLocalName" : "NULL",
                                       "localName" : "NULL"
                                    }
                                 }
                              } ]
                           },
                           "contextAlbumReference" : [ ],
                           "taskSelectionLogic" : {
                              "key" : "NULL",
                              "logicFlavour" : "UNDEFINED",
                              "logic" : ""
                           },
                           "stateFinalizerLogicMap" : {
                              "entry" : [ ]
                           },
                           "defaultTask" : {
                              "name" : "RegisterRuleToContextTask",
                              "version" : "0.0.1"
                           },
                           "taskReferences" : {
                              "entry" : [ {
                                 "key" : {
                                    "name" : "RegisterRuleToContextTask",
                                    "version" : "0.0.1"
                                 },
                                 "value" : {
                                    "key" : {
                                       "parentKeyName" : "RuleUpdatePolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "AddingRulestoMapState",
                                       "localName" : "RuleUpdatePolicy"
                                    },
                                    "outputType" : "DIRECT",
                                    "output" : {
                                       "parentKeyName" : "RuleUpdatePolicy",
                                       "parentKeyVersion" : "0.0.1",
                                       "parentLocalName" : "AddingRulestoMapState",
                                       "localName" : "RuleUpdateStateOutput"
                                    }
                                 }
                              } ]
                           }
                        }
                     } ]
                  },
                  "firstState" : "AddingRulestoMapState"
               }
            } ]
         }
      },
      "tasks" : {
         "key" : {
            "name" : "ApexDoPolicyModel_Tasks",
            "version" : "0.0.1"
         },
         "taskMap" : {
            "entry" : [ {
               "key" : {
                  "name" : "AlternativeActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AlternativeActionTask",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "action",
                        "value" : {
                           "key" : "action",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "actionDateTime",
                        "value" : {
                           "key" : "actionDateTime",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsOutputSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "historyContext",
                     "version" : "0.0.1"
                  }, {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "var returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar historyContext = executor.getContextAlbum(\"historyContext\");\nlogger.info(\"### Issuing ALTERNATIVE Action ###\");\nvar rulesFromState = taskInputEvent.get(\"rules\");\nvar ruleID = rulesFromState[0];\n\nvar historyContextID = taskInputEvent.get(\"faultAssetId\");\n\nvar rule = context.get(ruleID);\nvar history = historyContext.get(historyContextID);\nvar actionDateTime = new Date(Date.now()).toUTCString();\nvar alternativeAction = rule.get(\"alternativeAction\");\nvar ruleActionCount = rule.get(\"actionCount\");\n\nvar executionLogDataObject = {};\nvar actionAsJSON = {};\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\nexecutionLogDataObject.engineId = 45;\nexecutionLogDataObject.instanceId = 0;\nexecutionLogDataObject.action = String(alternativeAction);\nexecutionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\nexecutionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\nexecutionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\nexecutionLogDataObject.status = \"In Progress\";\n\nvar newHistoryContextObject = executor.getContextAlbum(\"historyContext\")\n.getSchemaHelper().createNewInstance();\nnewHistoryContextObject.put(\"eventType\", taskInputEvent.get(\"eventType\"));\nnewHistoryContextObject.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\nnewHistoryContextObject.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\nnewHistoryContextObject.put(\"action\", alternativeAction);\nnewHistoryContextObject.put(\"actionTimestamp\", actionDateTime);\nnewHistoryContextObject.put(\"arrayActionTimestamps\", history.get(\"arrayActionTimestamps\"));\n\nhistoryContext.put(historyContextID, newHistoryContextObject);\nlogger.info(\"\\n\\n\\t######### Updated Action History Context: #########\\n\\n\"\n        + executor.getContextAlbum(\"historyContext\").values()\n        + \"\\n\\t########## END OF HISTORY CONTEXT ##########\\n\");\n\ntaskOutputEvent.put(\"action\", alternativeAction);\nactionAsJSON.action = String(alternativeAction);\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\nactionAsJSON.faultAssetType = taskInputEvent.get(\"faultAssetType\");\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\nactionAsJSON.faultAssetName = taskInputEvent.get(\"faultAssetName\");\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\nactionAsJSON.faultAssetId = taskInputEvent.get(\"faultAssetId\");\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\nactionAsJSON.vdcName = taskInputEvent.get(\"vdcName\");\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\nactionAsJSON.vdcId = taskInputEvent.get(\"vdcId\");\ntaskOutputEvent.put(\"actionDateTime\", actionDateTime);\nactionAsJSON.actionDateTime = actionDateTime;\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\nactionAsJSON.additionalText = taskInputEvent.get(\"additionalText\");\nactionAsJSON.tenantName = taskInputEvent.get(\"tenantName\");\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\nactionAsJSON.subtenantName = taskInputEvent.get(\"subtenantName\");\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\n\ntriggerAsJSON.name = \"Trigger\";\ntriggerAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\ntriggerAsJSON.version = \"1.0\";\ntriggerAsJSON.source = \"CENX\";\ntriggerAsJSON.target = \"APEX\";\n\nactionAsJSON.name = \"Action\";\nactionAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\nactionAsJSON.version = \"0.0.1\";\nactionAsJSON.source = \"APEX\";\nactionAsJSON.target = \"ECM\";\n\n// Creating affectedObjects array, then an object and inserting it into\n// the array\nvar genericDataRecordType = Java.type(\"org.apache.avro.generic.GenericData.Record\");\nvar aObjects = executor.subject.getOutFieldSchemaHelper(\"affectedObjects\").createNewInstance();\nvar aObjectRecordSchema = executor.subject.getOutFieldSchemaHelper(\"affectedObjects\").getAvroSchema().getElementType();\nvar affectedObjectsJSONArray = [];\n// Handle empty and handle more than 1 affectedObjects in the array\nvar aObjectsLength = taskInputEvent.get(\"affectedObjects\").length;\n\nvar i;\nfor (i = 0; i < aObjectsLength; i++) {\n    var aObjectRecord = new genericDataRecordType(aObjectRecordSchema);\n    \n    aObjectRecord.put(\"assetType\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetType\"));\n    aObjectRecord.put(\"assetName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetName\"));\n    aObjectRecord.put(\"assetId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetId\"));\n    aObjectRecord.put(\"vdcName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcName\"));\n    aObjectRecord.put(\"vdcId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcId\"));\n    aObjects.add(aObjectRecord);\n    affectedObjectsJSONArray.push(JSON.parse(taskInputEvent.get(\"affectedObjects\").get(i)));\n}\ntaskOutputEvent.put(\"affectedObjects\", aObjects);\nactionAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\").get(0));\nactionAsJsonString = JSON.stringify(actionAsJSON);\ntriggerAsJsonString = JSON.stringify(triggerAsJSON);\nexecutionLogDataObject.rawMessageInput = triggerAsJsonString;\nexecutionLogDataObject.rawMessageOutput = actionAsJsonString;\n\nlogger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\nlogger.info(JSON.stringify(executionLogDataObject));\nlogger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n\nsendRESTRequestToNBI(executionLogDataObject);\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "LogOnlyActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "LogOnlyActionTask",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "action",
                        "value" : {
                           "key" : "action",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "actionDateTime",
                        "value" : {
                           "key" : "actionDateTime",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsOutputSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "historyContext",
                     "version" : "0.0.1"
                  }, {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "var returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar historyContext = executor.getContextAlbum(\"historyContext\");\nlogger.info(\"Issuing LOG ONLY Action\");\n\nvar historyContextID = taskInputEvent.get(\"faultAssetId\");\nvar history = historyContext.get(historyContextID);\nvar arrayOfTimeStamps = [];\nvar actionDateTime = new Date(Date.now()).toUTCString();\nif(history!=null){\n    arrayOfTimeStamps = history.get(\"arrayActionTimestamps\");\n}\n\nvar executionLogDataObject = {};\nvar actionAsJSON = {};\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\nexecutionLogDataObject.engineId = 45;\nexecutionLogDataObject.instanceId = 0;\nexecutionLogDataObject.action = \"Log Only\";\nexecutionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\nexecutionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\nexecutionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\nexecutionLogDataObject.status = \"Completed\";\n\nvar newHistoryContextObject = executor.getContextAlbum(\"historyContext\")\n.getSchemaHelper().createNewInstance();\nnewHistoryContextObject.put(\"eventType\", taskInputEvent.get(\"eventType\"));\nnewHistoryContextObject.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\nnewHistoryContextObject.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\nnewHistoryContextObject.put(\"action\", \"logOnly\");\nnewHistoryContextObject.put(\"actionTimestamp\", actionDateTime);\nnewHistoryContextObject.put(\"arrayActionTimestamps\", arrayOfTimeStamps);\nhistoryContext.put(historyContextID, newHistoryContextObject);\n\nactionAsJSON.action = \"logOnly\";\nactionAsJSON.faultAssetType = taskInputEvent.get(\"faultAssetType\");\nactionAsJSON.faultAssetName = taskInputEvent.get(\"faultAssetName\");\nactionAsJSON.faultAssetId = taskInputEvent.get(\"faultAssetId\");\nactionAsJSON.vdcName = taskInputEvent.get(\"vdcName\");\nactionAsJSON.vdcId = taskInputEvent.get(\"vdcId\");\nactionAsJSON.actionDateTime = actionDateTime;\nactionAsJSON.additionalText = taskInputEvent.get(\"additionalText\");\nactionAsJSON.tenantName = taskInputEvent.get(\"tenantName\");\nactionAsJSON.subtenantName = taskInputEvent.get(\"subtenantName\");\n\ntriggerAsJSON.name = \"Trigger\";\ntriggerAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\ntriggerAsJSON.version = \"1.0\";\ntriggerAsJSON.source = \"CENX\";\ntriggerAsJSON.target = \"APEX\";\n\nactionAsJSON.name = \"Action\";\nactionAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\nactionAsJSON.version = \"0.0.1\";\nactionAsJSON.source = \"APEX\";\nactionAsJSON.target = \"ECM\";\n\n// Creating affectedObjects array, then an object and inserting it into\n// the array\nvar genericDataRecordType = Java.type(\"org.apache.avro.generic.GenericData.Record\");\nvar aObjects = executor.subject.getOutFieldSchemaHelper(\"affectedObjects\").createNewInstance();\nvar aObjectRecordSchema = executor.subject.getOutFieldSchemaHelper(\"affectedObjects\").getAvroSchema().getElementType();\nvar affectedObjectsJSONArray = [];\n// Handle empty and handle more than 1 affectedObjects in the array\nvar aObjectsLength = taskInputEvent.get(\"affectedObjects\").length;\n\nvar i;\nfor (i = 0; i < aObjectsLength; i++) {\n    var aObjectRecord = new genericDataRecordType(aObjectRecordSchema);\n    \n    aObjectRecord.put(\"assetType\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetType\"));\n    aObjectRecord.put(\"assetName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetName\"));\n    aObjectRecord.put(\"assetId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetId\"));\n    aObjectRecord.put(\"vdcName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcName\"));\n    aObjectRecord.put(\"vdcId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcId\"));\n    aObjects.add(aObjectRecord);\n    affectedObjectsJSONArray.push(JSON.parse(taskInputEvent.get(\"affectedObjects\").get(i)));\n}\nactionAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\").get(0));\nactionAsJsonString = JSON.stringify(actionAsJSON);\ntriggerAsJsonString = JSON.stringify(triggerAsJSON);\nexecutionLogDataObject.rawMessageInput = triggerAsJsonString;\nexecutionLogDataObject.rawMessageOutput = actionAsJsonString;\n\nlogger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\nlogger.info(JSON.stringify(executionLogDataObject));\nlogger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n\nsendRESTRequestToNBI(executionLogDataObject);\nreturnValue = executor.FALSE;\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "PrimaryActionTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "PrimaryActionTask",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "action",
                        "value" : {
                           "key" : "action",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "actionDateTime",
                        "value" : {
                           "key" : "actionDateTime",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsOutputSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "historyContext",
                     "version" : "0.0.1"
                  }, {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "var returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar historyContext = executor.getContextAlbum(\"historyContext\");\nvar actionDateTime = new Date(Date.now()).toUTCString();\nlogger.info(\"Issuing PRIMARY Action\");\nvar rulesFromState = taskInputEvent.get(\"rules\");\nvar ruleID = rulesFromState[0];\n\nvar historyContextID = taskInputEvent.get(\"faultAssetId\");\n\nvar rule = context.get(ruleID);\nvar history = historyContext.get(historyContextID);\nvar rulePrimaryAction = rule.get(\"primaryAction\");\nvar ruleAlternativeAction = rule.get(\"alternativeAction\");\nvar arrayOfTimestamps = [];\nif(ruleAlternativeAction != \"null\"){\n    if(history!=null){\n        arrayOfTimestamps = JSON.parse(history.get(\"arrayActionTimestamps\"));\n    }\n    arrayOfTimestamps.splice(arrayOfTimestamps.length, 0, actionDateTime);\n}\n\nvar executionLogDataObject = {};\nvar actionAsJSON = {};\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\nexecutionLogDataObject.engineId = 45;\nexecutionLogDataObject.instanceId = 0;\nexecutionLogDataObject.action = String(rulePrimaryAction);\nexecutionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\nexecutionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\nexecutionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\nexecutionLogDataObject.status = \"In Progress\";\n\nvar newHistoryContextObject = executor.getContextAlbum(\"historyContext\")\n.getSchemaHelper().createNewInstance();\nnewHistoryContextObject.put(\"eventType\", taskInputEvent.get(\"eventType\"));\nnewHistoryContextObject.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\nnewHistoryContextObject.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\nnewHistoryContextObject.put(\"action\", rulePrimaryAction);\nnewHistoryContextObject.put(\"actionTimestamp\", actionDateTime);\nnewHistoryContextObject.put(\"arrayActionTimestamps\", JSON.stringify(arrayOfTimestamps));\n\nhistoryContext.put(historyContextID, newHistoryContextObject);\nlogger.info(\"\\n\\n\\t######### Updated Action History Context: #########\\n\\n\"\n                + executor.getContextAlbum(\"historyContext\").values()\n                + \"\\n\\t########## END OF HISTORY CONTEXT ##########\\n\");\n\ntaskOutputEvent.put(\"action\", rulePrimaryAction);\nactionAsJSON.action = String(rulePrimaryAction);\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\nactionAsJSON.faultAssetType = taskInputEvent.get(\"faultAssetType\");\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\nactionAsJSON.faultAssetName = taskInputEvent.get(\"faultAssetName\");\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\nactionAsJSON.faultAssetId = taskInputEvent.get(\"faultAssetId\");\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\nactionAsJSON.vdcName = taskInputEvent.get(\"vdcName\");\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\nactionAsJSON.vdcId = taskInputEvent.get(\"vdcId\");\ntaskOutputEvent.put(\"actionDateTime\", actionDateTime);\nactionAsJSON.actionDateTime = actionDateTime;\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\nactionAsJSON.additionalText = taskInputEvent.get(\"additionalText\");\nactionAsJSON.tenantName = taskInputEvent.get(\"tenantName\");\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\nactionAsJSON.subtenantName = taskInputEvent.get(\"subtenantName\");\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\n\ntriggerAsJSON.name = \"Trigger\";\ntriggerAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\ntriggerAsJSON.version = \"1.0\";\ntriggerAsJSON.source = \"CENX\";\ntriggerAsJSON.target = \"APEX\";\n\nactionAsJSON.name = \"Action\";\nactionAsJSON.nameSpace = \"org.onap.policy.apex.ecm\";\nactionAsJSON.version = \"0.0.1\";\nactionAsJSON.source = \"APEX\";\nactionAsJSON.target = \"ECM\";\n\n// Creating affectedObjects array, then an object and inserting it into\n// the array\nvar genericDataRecordType = Java\n        .type(\"org.apache.avro.generic.GenericData.Record\");\nvar aObjects = executor.subject.getOutFieldSchemaHelper(\"affectedObjects\")\n        .createNewInstance();\nvar aObjectRecordSchema = executor.subject.getOutFieldSchemaHelper(\n        \"affectedObjects\").getAvroSchema().getElementType();\nvar affectedObjectsJSONArray = [];\n// Handle empty and handle more than 1 affectedObjects in the array\nvar aObjectsLength = taskInputEvent.get(\"affectedObjects\").length;\n\nvar i;\nfor (i = 0; i < aObjectsLength; i++) {\n    var aObjectRecord = new genericDataRecordType(aObjectRecordSchema);\n    aObjectRecord.put(\"assetType\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetType\"));\n    aObjectRecord.put(\"assetName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetName\"));\n    aObjectRecord.put(\"assetId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"assetId\"));\n    aObjectRecord.put(\"vdcName\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcName\"));\n    aObjectRecord.put(\"vdcId\", taskInputEvent.get(\"affectedObjects\").get(i).get(\"vdcId\"));\n    aObjects.add(aObjectRecord);\n    affectedObjectsJSONArray.push(JSON.parse(taskInputEvent.get(\"affectedObjects\").get(i)));\n}\ntaskOutputEvent.put(\"affectedObjects\", aObjects);\nactionAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.affectedObjects = affectedObjectsJSONArray;\ntriggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\").get(0));\nactionAsJsonString = JSON.stringify(actionAsJSON);\ntriggerAsJsonString = JSON.stringify(triggerAsJSON);\nexecutionLogDataObject.rawMessageInput = triggerAsJsonString;\nexecutionLogDataObject.rawMessageOutput = actionAsJsonString;\n\nlogger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\nlogger.info(JSON.stringify(executionLogDataObject));\nlogger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n\nsendRESTRequestToNBI(executionLogDataObject);\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "RegisterRuleToContextTask",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RegisterRuleToContextTask",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "rule",
                        "value" : {
                           "key" : "rule",
                           "fieldSchemaKey" : {
                              "name" : "RulesArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "id",
                        "value" : {
                           "key" : "id",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "var returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\n\nlogger.info(executor.subject.id);\nlogger.info(\"########## Received Rule event ########## \\n\" + taskInputEvent);\n\nvar context = executor.getContextAlbum(\"ruleContext\");\n\ncontext.forEach(function(i){\n    context.remove(i);\n});\n\nvar i;\nfor (i = 0; i < taskInputEvent.get(\"rule\").length; i++) {\n\n    var newRuleRequest = executor.getContextAlbum(\"ruleContext\").getSchemaHelper().createNewInstance();\n\n    newRuleRequest.put(\"eventType\", taskInputEvent.get(\"rule\").get(i).get(\"eventType\"));\n    newRuleRequest.put(\"faultAssetType\", taskInputEvent.get(\"rule\").get(i).get(\"faultAssetType\"));\n    newRuleRequest.put(\"severityEvaluation\", taskInputEvent.get(\"rule\").get(i).get(\"severityEvaluation\"));\n    newRuleRequest.put(\"severity\", taskInputEvent.get(\"rule\").get(i).get(\"severity\"));\n    newRuleRequest.put(\"tenantName\", taskInputEvent.get(\"rule\").get(i).get(\"tenantName\"));\n    newRuleRequest.put(\"meterName\", taskInputEvent.get(\"rule\").get(i).get(\"meterName\"));\n    newRuleRequest.put(\"primaryAction\", taskInputEvent.get(\"rule\").get(i).get(\"primaryAction\"));\n    newRuleRequest.put(\"actionCount\", taskInputEvent.get(\"rule\").get(i).get(\"actionCount\"));\n    newRuleRequest.put(\"timeLapse\", taskInputEvent.get(\"rule\").get(i).get(\"timeLapse\"));\n    newRuleRequest.put(\"alternativeAction\", taskInputEvent.get(\"rule\").get(i).get(\"alternativeAction\"));\n\n    if(taskInputEvent.get(\"rule\").get(i).get(\"eventType\") == \"PM\" || taskInputEvent.get(\"rule\").get(i).get(\"eventType\") == \"FM\"){\n        var id = taskInputEvent.get(\"rule\").get(i).get(\"eventType\") + \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"faultAssetType\") + \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"tenantName\")+ \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"meterName\")+ \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"severityEvaluation\")+ \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"severity\");\n    }else if(taskInputEvent.get(\"rule\").get(i).get(\"eventType\") == \"COMM\"){\n        var id = taskInputEvent.get(\"rule\").get(i).get(\"eventType\") + \"-\"\n        + taskInputEvent.get(\"rule\").get(i).get(\"faultAssetType\");\n    }\n    context.put(id,newRuleRequest);\n    logger.info(\"########## Generated ID: \"+id+\" ########## \\n\");\n}\ntaskOutputEvent.put(\"id\", id);"
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState1Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState1Task",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "/*\n * State 1 Task\n * \n * This task filters rules that apply to an incoming trigger based on eventType and faultAssetType\n * Only rules that apply will be passed on to the next state - if no rules apply execution will be stopped.\n * \n */\n\nvar returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\n\nlogger.info(\"### Received Trigger Event ###\\n\" + taskInputEvent);\n\n//Passing the trigger along the pipeline\ntaskOutputEvent.put(\"name\", taskInputEvent.get(\"name\"));\ntaskOutputEvent.put(\"nameSpace\", taskInputEvent.get(\"nameSpace\"));\ntaskOutputEvent.put(\"version\", taskInputEvent.get(\"version\"));\ntaskOutputEvent.put(\"source\", taskInputEvent.get(\"source\"));\ntaskOutputEvent.put(\"target\", taskInputEvent.get(\"target\"));\ntaskOutputEvent.put(\"eventTimeStamp\", taskInputEvent.get(\"eventTimeStamp\"));\ntaskOutputEvent.put(\"eventType\", taskInputEvent.get(\"eventType\"));\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\ntaskOutputEvent.put(\"severity\", taskInputEvent.get(\"severity\"));\ntaskOutputEvent.put(\"probableCause\", taskInputEvent.get(\"probableCause\"));\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\ntaskOutputEvent.put(\"threshold\", taskInputEvent.get(\"threshold\"));\ntaskOutputEvent.put(\"affectedObjects\", taskInputEvent.get(\"affectedObjects\"));\n\nvar rulesObject = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\nvar rulesAlbum = executor.getContextAlbum(\"ruleContext\");\nvar applicableRules = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\n\nrulesAlbum.forEach(function(i){\n    rulesObject.add(i); \n}); \n\nvar eventType = taskInputEvent.get(\"eventType\");\nvar faultAssetType = taskInputEvent.get(\"faultAssetType\");\n\nvar idStart = eventType+\"-\"+faultAssetType;\nvar commHostIndex = rulesObject.indexOf(idStart);\ngetApplicableRules();\ninitRuleOutput();\n\nfunction getApplicableRules(){\n    if(commHostIndex != -1 && eventType==\"COMM\")\n    {\n        applicableRules.add(rulesObject[commHostIndex]);\n    }else{\n        rulesAlbum.forEach(function(i){\n            var indexOfPmRules= i.indexOf(idStart);\n            if(indexOfPmRules !== -1){\n                applicableRules.add(i);\n            }\n        });\n    }\n}\n\nfunction initRuleOutput(){\n    if(applicableRules.length == 0){\n        logger.info(\"### No Rule Exists For This Trigger ###\");\n        executionLogDataObject = initExecutionLogObject(\"Failed\", \"No rule was applied to this trigger.\");\n        logger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\n        logger.info(JSON.stringify(executionLogDataObject));\n        logger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n        sendRESTRequestToNBI(executionLogDataObject);\n        returnValue = executor.FALSE;\n    }\n    else{\n        logger.info(\"Rules applied based on eventType and faultAssetType: \"+ applicableRules.toString());\n        taskOutputEvent.put(\"rules\", applicableRules);\n    }\n}\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState2Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState2Task",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "/*\n * State 2 Task\n * \n * This task filters rules that apply to an incoming trigger based on tenantName - this must be an exact match.\n * Only rules that apply will be passed on to the next state - if no rules apply execution will be stopped.\n * \n */\nvar returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar ruleContext = executor.getContextAlbum(\"ruleContext\");\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\n\n//Passing the trigger along the pipeline\ntaskOutputEvent.put(\"name\", taskInputEvent.get(\"name\"));\ntaskOutputEvent.put(\"nameSpace\", taskInputEvent.get(\"nameSpace\"));\ntaskOutputEvent.put(\"version\", taskInputEvent.get(\"version\"));\ntaskOutputEvent.put(\"source\", taskInputEvent.get(\"source\"));\ntaskOutputEvent.put(\"target\", taskInputEvent.get(\"target\"));\ntaskOutputEvent.put(\"eventTimeStamp\", taskInputEvent.get(\"eventTimeStamp\"));\ntaskOutputEvent.put(\"eventType\", taskInputEvent.get(\"eventType\"));\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\ntaskOutputEvent.put(\"severity\", taskInputEvent.get(\"severity\"));\ntaskOutputEvent.put(\"probableCause\", taskInputEvent.get(\"probableCause\"));\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\ntaskOutputEvent.put(\"threshold\", taskInputEvent.get(\"threshold\"));\ntaskOutputEvent.put(\"affectedObjects\", taskInputEvent.get(\"affectedObjects\"));\n\nvar applicableRules = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\nvar rules = taskInputEvent.get(\"rules\");\nvar inputTenantName = taskInputEvent.get(\"tenantName\");\nvar eventType = taskInputEvent.get(\"eventType\");\n\nvar commHostIndex = rules.indexOf(\"COMM-Host\");\ngetApplicableRules();\ninitRuleOutput();\n\nfunction getApplicableRules(){\n    if(commHostIndex != -1 && eventType == \"COMM\")\n    {\n        applicableRules.add(rules[0]);\n    }else{\n        rules.forEach(function(i){\n            var ruleTenantName = getRuleTenantName(i);\n            if(inputTenantName == ruleTenantName){\n                 applicableRules.add(i);\n            }\n        });\n    }\n}\n\nfunction getRuleTenantName(ruleId){\n    var rule = ruleContext.get(ruleId);\n    return rule.get(\"tenantName\");\n}\n\nfunction initRuleOutput(){\n    if(applicableRules.length == 0){\n        logger.info(\"### No Rule Exists For This Trigger ###\");\n        executionLogDataObject = initExecutionLogObject(\"Failed\", \"No rule was applied to this trigger.\");\n        logger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\n        logger.info(JSON.stringify(executionLogDataObject));\n        logger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n        sendRESTRequestToNBI(executionLogDataObject);\n        returnValue = executor.FALSE;\n    }\n    else{\n        logger.info(\"Rules applied based on tenantName: \"+ applicableRules.toString());\n        taskOutputEvent.put(\"rules\", applicableRules);\n    }\n}\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState3Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState3Task",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "/*\n * State 3 Task\n * \n * This task filters rules that apply to an incoming trigger based on meterName. \n * meters with '*' include all meterNames starting with the string that precedes the '*' - cpu* rules apply to cpu_util triggers. \n * Only rules that apply will be passed on to the next state - if no rules apply execution will be stopped.\n * \n */\nvar returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\n\n// Passing the trigger along the pipeline\ntaskOutputEvent.put(\"name\", taskInputEvent.get(\"name\"));\ntaskOutputEvent.put(\"nameSpace\", taskInputEvent.get(\"nameSpace\"));\ntaskOutputEvent.put(\"version\", taskInputEvent.get(\"version\"));\ntaskOutputEvent.put(\"source\", taskInputEvent.get(\"source\"));\ntaskOutputEvent.put(\"target\", taskInputEvent.get(\"target\"));\ntaskOutputEvent.put(\"eventTimeStamp\", taskInputEvent.get(\"eventTimeStamp\"));\ntaskOutputEvent.put(\"eventType\", taskInputEvent.get(\"eventType\"));\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\ntaskOutputEvent.put(\"severity\", taskInputEvent.get(\"severity\"));\ntaskOutputEvent.put(\"probableCause\", taskInputEvent.get(\"probableCause\"));\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\ntaskOutputEvent.put(\"threshold\", taskInputEvent.get(\"threshold\"));\ntaskOutputEvent.put(\"affectedObjects\", taskInputEvent.get(\"affectedObjects\"));\n\nvar eventType = taskInputEvent.get(\"eventType\");\nvar rulesObject = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\nvar applicableRules = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\nvar rules = taskInputEvent.get(\"rules\");\nvar triggerMeterName = String(taskInputEvent.get(\"threshold\").get(0).get(\"meterName\"));\n\nvar commHostIndex = rules.indexOf(\"COMM-Host\");\ngetApplicableRules();\ninitRuleOutput();\n\nfunction getApplicableRules(){\n    if (commHostIndex != -1 && eventType == \"COMM\") {\n        applicableRules.add(rules[0]);\n    } else {\n        rules.forEach(function(i) {\n            var rule = context.get(i);\n            var ruleMeterName = String(rule.get(\"meterName\"));\n            var indexOfAst = ruleMeterName.indexOf(\"*\");\n            if (indexOfAst !== -1) {\n                ruleMeterNameTrimmed = ruleMeterName.slice(0, -1);\n                if (triggerMeterName.indexOf(ruleMeterNameTrimmed) !== -1) {\n                    applicableRules.add(i);\n                }\n            } else {\n                if (ruleMeterName.indexOf(triggerMeterName) !== -1) {\n                    applicableRules.add(i);\n                }\n            }\n        });\n    }\n}\n\nfunction initRuleOutput(){\n    if(applicableRules.length == 0){\n        logger.info(\"### No Rule Exists For This Trigger ###\");\n        executionLogDataObject = initExecutionLogObject(\"Failed\", \"No rule was applied to this trigger.\");\n        logger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\n        logger.info(JSON.stringify(executionLogDataObject));\n        logger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n        sendRESTRequestToNBI(executionLogDataObject);\n        returnValue = executor.FALSE;\n    }\n    else{\n        logger.info(\"Rules applied based on meterName: \"+ applicableRules.toString());\n        taskOutputEvent.put(\"rules\", applicableRules);\n    }\n}\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleFilteringState4Task",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleFilteringState4Task",
                     "version" : "0.0.1"
                  },
                  "inputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "outputFields" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  },
                  "taskParameters" : {
                     "entry" : [ ]
                  },
                  "contextAlbumReference" : [ {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  } ],
                  "taskLogic" : {
                     "key" : "TaskLogic",
                     "logicFlavour" : "JAVASCRIPT",
                     "logic" : "/*\n * State 4 Task\n * \n * This task filters rules that apply to an incoming trigger based on severity and severityEvaluation\n * Only rules that apply will be passed on to the next state - if no rules apply execution will be stopped.\n * \n * Rule Priority Evaluation:\n * \n *  1. Direct Equals - trigger: Major & rule: Equal_to_Major\n *  2. Greater than or equals rules with a matching severity - trigger: Major & rule: Greater_Than_Equal_to_Major\n *  3. Greater than rules with closest severity - trigger: Critical & rule: Greater_Than_Critical\n *  4. Greater than or equals rules - trigger: Major & rule: Greater_Than_Equal_to_Minor\n * \n */\nvar returnValueType = Java.type(\"java.lang.Boolean\");\nvar returnValue = new returnValueType(true);\n\nload(\"nashorn:mozilla_compat.js\");\nimportClass(java.util.ArrayList);\n\nvar logger = executor.logger;\nvar taskOutputEvent = executor.outFields;\nvar taskInputEvent = executor.inFields;\nvar context = executor.getContextAlbum(\"ruleContext\");\nvar triggerAsJSON = mapToJsonObject(taskInputEvent.entrySet());\n\n//Passing the trigger along the pipeline\ntaskOutputEvent.put(\"name\", taskInputEvent.get(\"name\"));\ntaskOutputEvent.put(\"nameSpace\", taskInputEvent.get(\"nameSpace\"));\ntaskOutputEvent.put(\"version\", taskInputEvent.get(\"version\"));\ntaskOutputEvent.put(\"source\", taskInputEvent.get(\"source\"));\ntaskOutputEvent.put(\"target\", taskInputEvent.get(\"target\"));\ntaskOutputEvent.put(\"eventTimeStamp\", taskInputEvent.get(\"eventTimeStamp\"));\ntaskOutputEvent.put(\"eventType\", taskInputEvent.get(\"eventType\"));\ntaskOutputEvent.put(\"faultAssetType\", taskInputEvent.get(\"faultAssetType\"));\ntaskOutputEvent.put(\"faultAssetName\", taskInputEvent.get(\"faultAssetName\"));\ntaskOutputEvent.put(\"faultAssetId\", taskInputEvent.get(\"faultAssetId\"));\ntaskOutputEvent.put(\"severity\", taskInputEvent.get(\"severity\"));\ntaskOutputEvent.put(\"probableCause\", taskInputEvent.get(\"probableCause\"));\ntaskOutputEvent.put(\"additionalText\", taskInputEvent.get(\"additionalText\"));\ntaskOutputEvent.put(\"tenantName\", taskInputEvent.get(\"tenantName\"));\ntaskOutputEvent.put(\"subtenantName\", taskInputEvent.get(\"subtenantName\"));\ntaskOutputEvent.put(\"vdcName\", taskInputEvent.get(\"vdcName\"));\ntaskOutputEvent.put(\"vdcId\", taskInputEvent.get(\"vdcId\"));\ntaskOutputEvent.put(\"threshold\", taskInputEvent.get(\"threshold\"));\ntaskOutputEvent.put(\"affectedObjects\", taskInputEvent.get(\"affectedObjects\"));\n\nvar rules = taskInputEvent.get(\"rules\");\n\nvar equalsRuleApplied = [];\nvar greaterThanEqualsRuleWithMatchingSeverity = [];\nvar greaterThanRules = [];\nvar greaterThanEqualsRule = [];\n\nvar applicableRuleObject = {};\nvar applicableRules = [];\n\nvar alarmBandsPriority = [\"minor\", \"major\", \"critical\"];\nvar eventType = taskInputEvent.get(\"eventType\");\nvar commHostIndex = rules.indexOf(\"COMM-Host\");\nif (commHostIndex != -1 && eventType == \"COMM\") {\n    var id = rules[0];\n    outputAppliedRule(id);\n} else {\n    rules.forEach(function(i){\n        applySeverityEvaluation(i);\n    });\n    applyRule();\n}\n\nfunction applySeverityEvaluation(ruleId){\n    var rule = context.get(ruleId);\n    var ruleSeverity = rule.get(\"severity\");\n    var ruleSeverityEval = rule.get(\"severityEvaluation\");\n    var triggerSeverity = taskInputEvent.get(\"severity\");\n    var ruleAppliesBool = checkEvaluationApplies(ruleSeverity, ruleSeverityEval, triggerSeverity);\n    if(ruleAppliesBool){\n        applicableRuleObject.evaluation = ruleSeverityEval;\n        applicableRuleObject.triggerSeverity = triggerSeverity;\n        applicableRuleObject.ruleSeverity = ruleSeverity;\n        applicableRuleObject.id = ruleId;\n        applicableRules.push(applicableRuleObject);\n    }\n}\n\nfunction checkEvaluationApplies(ruleSeverity, ruleSeverityEval, triggerSeverity){\n    if(equalsRuleApplies(ruleSeverity, ruleSeverityEval, triggerSeverity)){\n        return true;\n    }else{\n        return greaterThanRuleApplies(ruleSeverity, ruleSeverityEval, triggerSeverity);\n    }\n}\n\nfunction equalsRuleApplies(ruleSeverity, ruleSeverityEval, triggerSeverity){\n    if(ruleSeverity == triggerSeverity && ruleSeverityEval == \"Equal_to\"){\n        return true;\n    }else{\n        return false;\n    }\n}\n\nfunction greaterThanRuleApplies(ruleSeverity, ruleSeverityEval, triggerSeverity){\n    if(ruleSeverityEval == \"Greater_Than_Equal_to\" && ruleSeverity == triggerSeverity){\n        return true;\n    }else{\n        return isEncapsulatedByRule(ruleSeverity, triggerSeverity);\n    }\n}\n\nfunction isEncapsulatedByRule(ruleSeverity, triggerSeverity){\n    var triggerSeverityIndex = alarmBandsPriority.indexOf(triggerSeverity);\n    var ruleSeverityIndex = alarmBandsPriority.indexOf(String(ruleSeverity));\n    if(triggerSeverityIndex > ruleSeverityIndex){\n        return true;\n    }else{\n        return false;\n    }\n}\n\nfunction applyRule(){\n    if(applicableRules.length == 0){\n        logger.info(\"### No Rule Exists For This Trigger ###\");\n        executionLogDataObject = initExecutionLogObject(\"Failed\", \"No rule was applied to this trigger.\");\n        logger.info(\"\\n\\n:::::::::::::: EXECUTION LOG OUTPUT ::::::::::::::\\n\\n\");\n        logger.info(JSON.stringify(executionLogDataObject));\n        logger.info(\"\\n\\n::::::::::::::::::::::::::::::::::::::::::::::::::\\n\\n\");\n        sendRESTRequestToNBI(executionLogDataObject);\n        returnValue = executor.FALSE;\n    }else if(applicableRules.length == 1){\n        var id = applicableRules[0][\"id\"];\n        outputAppliedRule(id);\n    }else{\n        findRuleInArray();\n    }\n}\n\nfunction findRuleInArray(){ \n    applicableRules.forEach(function(i){\n        if(i[\"evaluation\"]==\"Equal_to\"){\n            equalsRuleApplied.push(i[\"id\"]);\n        }else if(i[\"evaluation\"] == \"Greater_Than_Equal_to\" && i[\"ruleSeverity\"] == i[\"triggerSeverity\"]){\n            greaterThanEqualsRuleWithMatchingSeverity.push(i[\"id\"]);\n        }else if(i[\"evaluation\"] == \"Greater_Than\"){\n            greaterThanRules.push(i[\"id\"]);\n        }else if(i[\"evaluation\"] == \"Greater_Than_Equal_to\" && i[\"ruleSeverity\"] != i[\"triggerSeverity\"]){\n            greaterThanEqualsRule.push(i[\"id\"]);\n        }\n    });\n    getEvaluationPriority();\n}\n\nfunction getEvaluationPriority(){\n    // If there are more than 1 rules we need a priority \n    if(equalsRuleApplied.length > 0){\n        var id = equalsRuleApplied[0];\n        outputAppliedRule(id);\n    }else if(greaterThanEqualsRuleWithMatchingSeverity.length > 0){\n        var id = greaterThanEqualsRuleWithMatchingSeverity[0];\n        outputAppliedRule(id);\n    }else if(greaterThanRules.length > 0){\n        var id = greaterThanRules[0];\n        outputAppliedRule(id);\n    }else if(greaterThanEqualsRule.length > 0){\n        var id = greaterThanEqualsRule[0];\n        outputAppliedRule(id);\n    }\n}\n\nfunction outputAppliedRule(ruleId){\n    logger.info(\"Rule chosen based on severity and severityEvaluation: \"+ ruleId);\n    var appliedRule = executor.subject.getOutFieldSchemaHelper(\"rules\").createNewInstance();\n    appliedRule.add(ruleId);\n    taskOutputEvent.put(\"rules\", appliedRule);\n}\nfunction sendRESTRequestToNBI(logJsonObject) {\n    var clientType = Java.type(\"javax.ws.rs.client.ClientBuilder\");\n    var restClient = clientType.newClient();\n    var jsonString = JSON.stringify(logJsonObject);\n    var entityType = Java.type(\"javax.ws.rs.client.Entity\")\n    var entity = entityType.json(jsonString);\n   // var response = restClient.target(\"http://policynbi:8080/sd/v1.0/log/\").request().post(entity);\n    //logger.info(\"### NBI REST RESPONSE: \"+response+\" ###\");\n}\n\nfunction mapToJsonObject(inMap) {\n    jsonObj = {};\n    inMap.forEach(function(entry) {\n        var key = entry.getKey();\n        var value = entry.getValue();\n        jsonObj[key] = value;\n    });\n    return jsonObj;\n}\n\nfunction initExecutionLogObject(status, message) {\n    var executionLogDataObject = {};\n    executionLogDataObject.engineID = 45;\n    executionLogDataObject.instanceID = 0;\n    executionLogDataObject.eventType = taskInputEvent.get(\"eventType\");\n    executionLogDataObject.assetType = taskInputEvent.get(\"faultAssetType\");\n    executionLogDataObject.assetName = taskInputEvent.get(\"faultAssetName\");\n    triggerAsJSON.name = taskInputEvent.get(\"name\");\n    triggerAsJSON.nameSpace = taskInputEvent.get(\"nameSpace\");\n    triggerAsJSON.version = taskInputEvent.get(\"version\");\n    triggerAsJSON.source = taskInputEvent.get(\"source\");\n    triggerAsJSON.target = taskInputEvent.get(\"target\");\n    triggerAsJSON.affectedObjects = JSON.parse(taskInputEvent.get(\"affectedObjects\"));\n    triggerAsJSON.threshold = JSON.parse(taskInputEvent.get(\"threshold\"));\n    triggerAsJsonString = JSON.stringify(triggerAsJSON);\n    executionLogDataObject.rawMessageInput = triggerAsJsonString;\n    executionLogDataObject.status = status;\n    executionLogDataObject.notes = message;\n    executionLogDataObject.action = \"\";\n    return executionLogDataObject;\n}"
                  }
               }
            } ]
         }
      },
      "events" : {
         "key" : {
            "name" : "ApexDoPolicyModel_Events",
            "version" : "0.0.1"
         },
         "eventMap" : {
            "entry" : [ {
               "key" : {
                  "name" : "Action",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "Action",
                     "version" : "0.0.1"
                  },
                  "nameSpace" : "org.onap.policy.apex.ecm",
                  "source" : "APEX",
                  "target" : "ECM",
                  "parameter" : {
                     "entry" : [ {
                        "key" : "action",
                        "value" : {
                           "key" : "action",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "actionDateTime",
                        "value" : {
                           "key" : "actionDateTime",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsOutputSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleEvent",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleEvent",
                     "version" : "0.0.1"
                  },
                  "nameSpace" : "org.onap.policy.apex.do.rule.engine",
                  "source" : "RuleEngine",
                  "target" : "APEX",
                  "parameter" : {
                     "entry" : [ {
                        "key" : "rule",
                        "value" : {
                           "key" : "rule",
                           "fieldSchemaKey" : {
                              "name" : "RulesArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  }
               }
            }, {
               "key" : {
                  "name" : "RuleOutEvent",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleOutEvent",
                     "version" : "0.0.1"
                  },
                  "nameSpace" : "org.onap.policy.apex.do.rule.engine",
                  "source" : "APEX",
                  "target" : "logfile",
                  "parameter" : {
                     "entry" : [ {
                        "key" : "id",
                        "value" : {
                           "key" : "id",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  }
               }
            }, {
               "key" : {
                  "name" : "StateTrigger",
                  "version" : "1.0"
               },
               "value" : {
                  "key" : {
                     "name" : "StateTrigger",
                     "version" : "1.0"
                  },
                  "nameSpace" : "org.onap.policy.apex.ecm",
                  "source" : "CENX",
                  "target" : "APEX",
                  "parameter" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "rules",
                        "value" : {
                           "key" : "rules",
                           "fieldSchemaKey" : {
                              "name" : "RuleIdsArraySchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  }
               }
            }, {
               "key" : {
                  "name" : "Trigger",
                  "version" : "1.0"
               },
               "value" : {
                  "key" : {
                     "name" : "Trigger",
                     "version" : "1.0"
                  },
                  "nameSpace" : "org.onap.policy.apex.ecm",
                  "source" : "CENX",
                  "target" : "APEX",
                  "parameter" : {
                     "entry" : [ {
                        "key" : "additionalText",
                        "value" : {
                           "key" : "additionalText",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "affectedObjects",
                        "value" : {
                           "key" : "affectedObjects",
                           "fieldSchemaKey" : {
                              "name" : "AffectedObjectsSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventTimeStamp",
                        "value" : {
                           "key" : "eventTimeStamp",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "eventType",
                        "value" : {
                           "key" : "eventType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetId",
                        "value" : {
                           "key" : "faultAssetId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetName",
                        "value" : {
                           "key" : "faultAssetName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "faultAssetType",
                        "value" : {
                           "key" : "faultAssetType",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "name",
                        "value" : {
                           "key" : "name",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "nameSpace",
                        "value" : {
                           "key" : "nameSpace",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "probableCause",
                        "value" : {
                           "key" : "probableCause",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "severity",
                        "value" : {
                           "key" : "severity",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "source",
                        "value" : {
                           "key" : "source",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "subtenantName",
                        "value" : {
                           "key" : "subtenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "target",
                        "value" : {
                           "key" : "target",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "tenantName",
                        "value" : {
                           "key" : "tenantName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "threshold",
                        "value" : {
                           "key" : "threshold",
                           "fieldSchemaKey" : {
                              "name" : "ThresholdSchemaType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcId",
                        "value" : {
                           "key" : "vdcId",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "vdcName",
                        "value" : {
                           "key" : "vdcName",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     }, {
                        "key" : "version",
                        "value" : {
                           "key" : "version",
                           "fieldSchemaKey" : {
                              "name" : "SimpleStringType",
                              "version" : "0.0.1"
                           },
                           "optional" : false
                        }
                     } ]
                  }
               }
            } ]
         }
      },
      "albums" : {
         "key" : {
            "name" : "ApexDoPolicyModel_Albums",
            "version" : "0.0.1"
         },
         "albums" : {
            "entry" : [ {
               "key" : {
                  "name" : "historyContext",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "historyContext",
                     "version" : "0.0.1"
                  },
                  "scope" : "policy",
                  "isWritable" : true,
                  "itemSchema" : {
                     "name" : "HistoryContextSchema",
                     "version" : "0.0.1"
                  }
               }
            }, {
               "key" : {
                  "name" : "ruleContext",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ruleContext",
                     "version" : "0.0.1"
                  },
                  "scope" : "policy",
                  "isWritable" : true,
                  "itemSchema" : {
                     "name" : "RuleSchemaType",
                     "version" : "0.0.1"
                  }
               }
            } ]
         }
      },
      "schemas" : {
         "key" : {
            "name" : "ApexDoPolicyModel_Schemas",
            "version" : "0.0.1"
         },
         "schemas" : {
            "entry" : [ {
               "key" : {
                  "name" : "AffectedObjectsOutputSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AffectedObjectsOutputSchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{  \n   \"type\":\"array\",\n   \"items\":{  \n      \"type\":\"record\",\n      \"name\":\"affectedObjects\",\n      \"fields\":[  \n         {  \n            \"name\":\"assetType\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"assetName\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"assetId\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"vdcName\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"vdcId\",\n            \"type\":\"string\"\n         }\n      ]\n   },\n   \"default\":{}\n}"
               }
            }, {
               "key" : {
                  "name" : "AffectedObjectsSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "AffectedObjectsSchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{  \n   \"type\":\"array\",\n   \"items\":{  \n      \"type\":\"record\",\n      \"name\":\"affectedObjects\",\n      \"fields\":[  \n         {  \n            \"name\":\"assetType\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"assetName\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"assetId\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"vdcName\",\n            \"type\":\"string\"\n         },\n         {  \n            \"name\":\"vdcId\",\n            \"type\":\"string\"\n         }\n      ]\n   },\n   \"default\":{}\n}"
               }
            }, {
               "key" : {
                  "name" : "HistoryContextSchema",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "HistoryContextSchema",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{\n    \"type\": \"record\",\n    \"name\": \"History\",\n    \"namespace\": \"org.onap.policy.apex.do.rule\",\n    \"fields\": [\n           {\n               \"name\": \"eventType\",\n               \"type\": \"string\"\n           },\n           {\n               \"name\": \"faultAssetType\",\n               \"type\": \"string\"\n           },\n           {\n               \"name\": \"faultAssetName\",\n               \"type\": \"string\"\n           },\n           {\n               \"name\": \"action\",\n               \"type\": \"string\"\n           },\n           {\n               \"name\": \"actionTimestamp\",\n               \"type\": \"string\"\n           },\n           {\n               \"name\": \"arrayActionTimestamps\",\n               \"type\": \"string\"\n           }\n    ]\n}"
               }
            }, {
               "key" : {
                  "name" : "RuleIdsArraySchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleIdsArraySchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{\n\t\"type\": \"array\",\n\t\"items\":\"string\"\n}"
               }
            }, {
               "key" : {
                  "name" : "RuleSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RuleSchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{\n\t\"type\": \"record\",\n\t\"name\": \"Rule\",\n\t\"namespace\": \"org.onap.policy.apex.do.rule\",\n\t\"fields\": [\n\t\t   {\n\t\t\t   \"name\": \"eventType\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"faultAssetType\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"severityEvaluation\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\t\t   \n\t\t   {\n\t\t\t   \"name\": \"severity\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"tenantName\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"meterName\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"primaryAction\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"actionCount\",\n\t\t\t   \"type\": \"int\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"timeLapse\",\n\t\t\t   \"type\": \"int\"\n\t\t   },   \t   \n\t\t   {\n   \t\t\t   \"name\": \"alternativeAction\",\n\t\t\t   \"type\": \"string\"\n\t\t   }\n\t]\n}"
               }
            }, {
               "key" : {
                  "name" : "RulesArraySchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "RulesArraySchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{\n\t\"type\": \"array\",\n\t\"items\":{\n\t   \"type\": \"record\",\n\t   \"name\": \"rule\",\n\t   \t\"fields\": [\n\t\t   {\n\t\t\t   \"name\": \"eventType\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"faultAssetType\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"severityEvaluation\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\t\t   \n\t\t   {\n\t\t\t   \"name\": \"severity\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"tenantName\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"meterName\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"primaryAction\",\n\t\t\t   \"type\": \"string\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"actionCount\",\n\t\t\t   \"type\": \"int\"\n\t\t   },\n\t\t   {\n\t\t\t   \"name\": \"timeLapse\",\n\t\t\t   \"type\": \"int\"\n\t\t   },   \t   \n\t\t   {\n   \t\t\t   \"name\": \"alternativeAction\",\n\t\t\t   \"type\": \"string\"\n\t\t   }\n\t   ]\n\t},\n    \"default\":{}\n}"
               }
            }, {
               "key" : {
                  "name" : "SimpleArrayType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleArrayType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Java",
                  "schemaDefinition" : "java.util.Arrays"
               }
            }, {
               "key" : {
                  "name" : "SimpleDateType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleDateType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Java",
                  "schemaDefinition" : "java.util.Date"
               }
            }, {
               "key" : {
                  "name" : "SimpleIntegerType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleIntegerType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Java",
                  "schemaDefinition" : "java.lang.Integer"
               }
            }, {
               "key" : {
                  "name" : "SimpleStringType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "SimpleStringType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Java",
                  "schemaDefinition" : "java.lang.String"
               }
            }, {
               "key" : {
                  "name" : "ThresholdSchemaType",
                  "version" : "0.0.1"
               },
               "value" : {
                  "key" : {
                     "name" : "ThresholdSchemaType",
                     "version" : "0.0.1"
                  },
                  "schemaFlavour" : "Avro",
                  "schemaDefinition" : "{  \n   \"type\":\"array\",\n   \"items\":{  \n      \"type\":\"record\",\n      \"name\":\"threshold\",\n      \"fields\":[  \n\t\t   \t\t{ \"name\" : \"meterName\",         \"type\" : \"string\" },\n            \t{ \"name\" : \"threshold\",    \t\t\"type\" : \"string\" },\n            \t{ \"name\" : \"meterValue\",        \"type\" : \"string\" }\n      ]\n   }\n}"
               }
            } ]
         }
      }
   }
}
